<div class="modal-header">
    <header>Add a new transaction</header>
    <button type="button" class="btn-close" aria-label="Close" (click)="cancelDialog()"></button>
</div>
<div class="modal-body" [formGroup]="form">
    <div>
        <label class="form-label" for="transactionDate">Transaction Date</label>
        <div class="input-group">
            <input id="transactionDate" class="form-control" placeholder="mm/dd/yyyy" formControlName="transactionDate"
                   ngbDatepicker [maxDate]="maxDate" ngbAutofocus #dateField #d="ngbDatepicker">
            <button class="btn btn-outline-secondary bi bi-calendar3" (click)="d.open()"></button>
        </div>
    </div>
    
    <div>
        <label class="form-label" for="amount">Amount</label>
        <input type="number" id="amount" class="form-control" min="0.01" step="0.01" id="amount" formControlName="amount">
    </div>

    <div>
        <label class="form-label" for="categoryId">Category</label>
        <div class="input-group">
            <input id="categoryId" class="form-control" formControlName="category" [ngbTypeahead]="searchCategories"
                [editable]="false" [inputFormatter]="formatter" [resultFormatter]="formatter" [resultTemplate]="rt">
            <button type="button" class="btn btn-outline-secondary" (click)="openCategoryModal()">
                <i class="bi bi-plus"></i>
            </button>
        </div>
    </div>

    <div>
        <label class="form-label" for="memo">Memo</label>
        <input type="text" id="memo" class="form-control" formControlName="memo" (keypress.enter)="saveTransaction()">
    </div>

    <div class="form-check mt-2">
        <input type="checkbox" class="form-check-input" [formControl]="keepDialogOpenOnSave" id="keepDialogOpenOnSave">
        <label class="form-check-label" for="keepDialogOpenOnSave">
            Enter another transaction
        </label>
    </div>
</div>
<div class="modal-footer">
    <button type="button" class="btn-primary" (click)="saveTransaction()" [disabled]="this.form.invalid">Save Transaction</button>
    <button type="button" class="btn-secondary" (click)="cancelDialog()">Cancel</button>
</div>

<ng-template #rt let-r="result">
    {{ r.displayName }}
</ng-template>
